<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Snohomish River Data Graphs</title>
   <script src="https://cdn.tailwindcss.com"></script>
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
   <style>
       body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
       @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
   </style>
</head>
<body class="p-4 md:p-8">
 
   <div class="max-w-7xl mx-auto">
       <h1 class="text-3xl font-bold text-gray-900 mb-8">
           Snohomish River Research: Data Visualization
       </h1>

       <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

           <!-- Figure 1 -->
           <figure class="bg-white p-8 rounded-lg shadow-lg border border-gray-200">
               <h2 class="text-xl font-semibold mb-4 text-gray-800">Species Richness by Site (2018 vs. 2023)</h2>
               <div class="h-96"><canvas id="barChart"></canvas></div>
               <figcaption class="mt-6 pt-4 border-t border-gray-300 text-sm text-gray-700 leading-relaxed">
                   <strong>Figure 1.</strong> Species richness (number of unique species observed on the boat) at three Snohomish River estuary sites in October 2018 and October 2023. Species richness increased at all three sites from 2018 to 2023.
               </figcaption>
           </figure>

           <!-- Figure 2 -->
           <figure class="bg-white p-8 rounded-lg shadow-lg border border-gray-200">
               <h2 class="text-xl font-semibold mb-4 text-gray-800">Water Clarity vs. Species Richness</h2>
               <div class="h-96"><canvas id="scatterClarityChart"></canvas></div>
               <figcaption class="mt-6 pt-4 border-t border-gray-300 text-sm text-gray-700 leading-relaxed">
                   <strong>Figure 2.</strong> Water clarity (Secchi disk depth in meters) vs. species richness for all six sampling events. Secchi disk was lowered until no longer visible.
               </figcaption>
           </figure>

           <!-- Figure 3 -->
           <figure class="bg-white p-8 rounded-lg shadow-lg border border-gray-200 lg:col-span-2">
               <h2 class="text-xl font-semibold mb-4 text-gray-800">Temperature vs. Species Richness</h2>
               <div class="h-96"><canvas id="scatterTempChart"></canvas></div>
               <figcaption class="mt-6 pt-4 border-t border-gray-300 text-sm text-gray-700 leading-relaxed">
                   <strong>Figure 3.</strong> Water temperature (°C, measured with Castaway/EXO sonde) vs. species richness. Higher species richness was observed in the warmer 2023 samples.
               </figcaption>
           </figure>

       </div>
   </div>

   <script>
       const rawData = [
           { site: 'Log Skid', year: 2018, temp: 12.59, richness: 4, clarity: 3.5 },
           { site: 'Langus', year: 2018, temp: 12.43, richness: 5, clarity: 4.0 },
           { site: '10th Street', year: 2018, temp: 12.67, richness: 2, clarity: 3.0 },
           { site: 'Log Skid', year: 2023, temp: 12.80, richness: 9, clarity: 5.75 },
           { site: 'Langus', year: 2023, temp: 12.89, richness: 7, clarity: 3.5 },
           { site: '10th Street', year: 2023, temp: 12.94, richness: 12, clarity: 4.63 }
       ];

       const siteColors = { 'Log Skid': 'rgba(239,68,68,0.8)', 'Langus': 'rgba(59,130,246,0.8)', '10th Street': 'rgba(16,185,129,0.8)' };

       // Bar chart
       new Chart(document.getElementById('barChart'), {
           type: 'bar',
           data: { labels: ['Log Skid','Langus','10th Street'],
                   datasets: [{ label: '2018', data: [4,5,2], backgroundColor: 'rgba(156,163,175,0.7)' },
                              { label: '2023', data: [9,7,12], backgroundColor: 'rgba(59,130,246,0.7)' }]},
           options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } },
                      scales: { y: { beginAtZero: true, title: { display: true, text: 'Species Count' }}} }
       });

       // Clarity scatter
       new Chart(document.getElementById('scatterClarityChart'), {
           type: 'scatter',
           data: { datasets: ['Log Skid','Langus','10th Street'].map(site => ({
               label: site,
               data: rawData.filter(d=>d.site===site).map(d=>({x:d.clarity,y:d.richness})),
               backgroundColor: siteColors[site],
               pointRadius: 10
           }))},
           options: { responsive: true, maintainAspectRatio: false,
                      scales: { x: { title: { display: true, text: 'Water Clarity (Secchi depth, m)' }},
                                y: { beginAtZero: true, title: { display: true, text: 'Species Richness' }}}}
       });

       // Temperature scatter
       new Chart(document.getElementById('scatterTempChart'), {
           type: 'scatter',
           data: { datasets: ['Log Skid','Langus','10th Street'].map(site => ({
               label: site,
               data: rawData.filter(d=>d.site===site).map(d=>({x:d.temp,y:d.richness})),
               backgroundColor: siteColors[site],
               pointRadius: 10
           }))},
           options: { responsive: true, maintainAspectRatio: false,
                      scales: { x: { title: { display: true, text: 'Temperature (°C)' }, min:12, max:13.5 },
                                y: { beginAtZero: true, title: { display: true, text: 'Species Richness' }}}}
       });
   </script>
</body>
</html>
